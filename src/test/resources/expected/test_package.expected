/*
 * Copyright (C) 2021 Electronic Arts Inc.  All rights reserved.
 */

// This file is autogenerated by kara. Do not edit.

package com.ea.kara.generated

// TODO: These wildcard imports are a source of trouble: get rid of them.

// Java
import java.nio.ByteBuffer
import java.nio.charset.StandardCharsets
import java.util.Base64

// Cats
import cats.syntax.either._

// Circe
import io.circe._, io.circe.parser._, io.circe.generic.auto._, io.circe.syntax._

// Scrooge
import com.twitter.scrooge._

// Apache Thrift
import org.apache.thrift.protocol._

// ThriftStruct <-> JSON conversions
import com.ea.kara.generated.imported_test._
package object test {
  // #######ByteBuffer#######

  private implicit def encodeByteBuffer: Encoder[ByteBuffer] =
    Encoder.instance(buffer => new String(Base64.getEncoder.encode(buffer).array(), StandardCharsets.UTF_8).asJson)

  private implicit def decodeByteBuffer: Decoder[ByteBuffer] =
    Decoder.decodeString.emap { str =>
      Either.catchNonFatal(ByteBuffer.wrap(Base64.getDecoder.decode(str.getBytes(StandardCharsets.UTF_8))))
        .leftMap(t => t.getMessage)
    }

  // #####End ByteBuffer#####

  // TODO: improve UnknownUnionField encoding/decoding
  // ######Apache Structs######

  private implicit def encodeTFieldBlob: Encoder[TFieldBlob] =
    Encoder.instance(_ => Vector(Array.empty[Byte]).asJson)

  // ####End Apache Structs####

  // ##########Unions##########

  // Implicits for ExampleUnion

  implicit def decode___com_example___ExampleUnion: Decoder[com.example.ExampleUnion] =
    Decoder.instance(union =>
      Seq[Either[DecodingFailure, com.example.ExampleUnion]](
      union.as[com.example.ExampleUnion.ABool],
      union.as[com.example.ExampleUnion.AnExampleField],
      ).collectFirst {
        case decoded: Right[DecodingFailure, com.example.ExampleUnion] => decoded
      }.getOrElse {
        Right(com.example.ExampleUnion.UnknownUnionField(TFieldBlob(new TField(), Array.emptyByteArray)))
      }
    )

  implicit def encode___com_example___ExampleUnion: Encoder[com.example.ExampleUnion] =
    Encoder.instance(union =>
      union match {
      case value: com.example.ExampleUnion.ABool => value.asJson
      case value: com.example.ExampleUnion.AnExampleField => value.asJson
      case value: com.example.ExampleUnion.UnknownUnionField => Json.fromString("UnknownUnionField")
      }
    )

  // ########End Unions########

  // ###########Enums###########

  // Implicits for ExampleEnum

  implicit def decode___com_example___ExampleEnum: Decoder[com.example.ExampleEnum] =
    Decoder.decodeString.emap { str =>
      Either.catchNonFatal(com.example.ExampleEnum.valueOf(str).get).leftMap(t => t.getMessage)
    }

  implicit def encode___com_example___ExampleEnum: Encoder[com.example.ExampleEnum] =
    Encoder.encodeString.contramap[com.example.ExampleEnum](_.originalName)

  // #########End Enums#########

  // ##########Structs##########

  // Implicits for ExampleField

  implicit def decode___com_example___ExampleField: Decoder[com.example.ExampleField] =
    Decoder.forProduct2(
    "aBool",
    "aString",
    )(com.example.ExampleField.apply)

  implicit def encode___com_example___ExampleField: Encoder[com.example.ExampleField] =
    Encoder.forProduct2(
    "aBool",
    "aString",
    )(examplefield =>
      (
      examplefield.aBool,
      examplefield.aString,
      )
  )

  // Implicits for Upper

  implicit def decode___com_example___Upper: Decoder[com.example.Upper] =
    Decoder.forProduct1(
    "aValue",
    )(com.example.Upper.apply)

  implicit def encode___com_example___Upper: Encoder[com.example.Upper] =
    Encoder.forProduct1(
    "aValue",
    )(upper =>
      (
      upper.aValue,
      )
  )

  // Implicits for ExampleRequest

  implicit def decode___com_example___ExampleRequest: Decoder[com.example.ExampleRequest] =
    Decoder.forProduct17(
    "externalId",
    "settings",
    "settingsList",
    "settingsSet",
    "settingsMap",
    "logLevel",
    "newUnionField",
    "importedEnum",
    "importedStruct",
    "aList",
    "aMap",
    "aShort",
    "anInt",
    "aLong",
    "aBinary",
    "anOption",
    "empty",
    )(com.example.ExampleRequest.apply)

  implicit def encode___com_example___ExampleRequest: Encoder[com.example.ExampleRequest] =
    Encoder.forProduct17(
    "externalId",
    "settings",
    "settingsList",
    "settingsSet",
    "settingsMap",
    "logLevel",
    "newUnionField",
    "importedEnum",
    "importedStruct",
    "aList",
    "aMap",
    "aShort",
    "anInt",
    "aLong",
    "aBinary",
    "anOption",
    "empty",
    )(examplerequest =>
      (
      examplerequest.externalId,
      examplerequest.settings,
      examplerequest.settingsList,
      examplerequest.settingsSet,
      examplerequest.settingsMap,
      examplerequest.logLevel,
      examplerequest.newUnionField,
      examplerequest.importedEnum,
      examplerequest.importedStruct,
      examplerequest.aList,
      examplerequest.aMap,
      examplerequest.aShort,
      examplerequest.anInt,
      examplerequest.aLong,
      examplerequest.aBinary,
      examplerequest.anOption,
      examplerequest.empty,
      )
  )

  // Implicits for ExampleResponse

  implicit def decode___com_example___ExampleResponse: Decoder[com.example.ExampleResponse] =
    Decoder.forProduct2(
    "id",
    "name",
    )(com.example.ExampleResponse.apply)

  implicit def encode___com_example___ExampleResponse: Encoder[com.example.ExampleResponse] =
    Encoder.forProduct2(
    "id",
    "name",
    )(exampleresponse =>
      (
      exampleresponse.id,
      exampleresponse.name,
      )
  )

  // Implicits for ExampleException

  implicit def decode___com_example___ExampleException: Decoder[com.example.ExampleException] =
    Decoder.forProduct1(
    "message",
    )(com.example.ExampleException.apply)

  implicit def encode___com_example___ExampleException: Encoder[com.example.ExampleException] =
    Encoder.forProduct1(
    "message",
    )(exampleexception =>
      (
      exampleexception.message,
      )
  )

  // Implicits for OtherExampleException

  implicit def decode___com_example___OtherExampleException: Decoder[com.example.OtherExampleException] =
    Decoder.forProduct2(
    "message",
    "code",
    )(com.example.OtherExampleException.apply)

  implicit def encode___com_example___OtherExampleException: Encoder[com.example.OtherExampleException] =
    Encoder.forProduct2(
    "message",
    "code",
    )(otherexampleexception =>
      (
      otherexampleexception.message,
      otherexampleexception.code,
      )
  )

  // ########End Structs########

  // #######NoArg Structs#######

  implicit def decode___com_example___EmptyStruct: Decoder[com.example.EmptyStruct] = {
    Decoder.const(com.example.EmptyStruct())
  }

  implicit def encode___com_example___EmptyStruct: Encoder[com.example.EmptyStruct] =
    Encoder.instance(_ => Json.obj())

  // #####End NoArg Structs#####
}
